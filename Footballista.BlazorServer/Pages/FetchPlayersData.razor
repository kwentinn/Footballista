@page "/fetchplayersdata"

@using Footballista.BlazorServer.Data
@using Footballista.BlazorServer.Data.Players
@inject PlayersService playerService

<h1>Generated players</h1>

<p>This component demonstrates fetching data from a service.</p>

@if (players == null)
{
	<p><em>Loading...</em></p>
}
else
{
	<table class="table">
		<thead>
			<tr>
				<th>Firstname</th>
				<th>Lastname</th>
				<th>Nationalities</th>
				<th>Gender</th>
				<th>Foot</th>
				<th>Dob</th>
				<th>Place of birth</th>
				<th>Height (cm)</th>
				<th>Weight (kg)</th>
				<th>Rating</th>
			</tr>
		</thead>
		<tbody>
			@foreach (Player player in players)
			{
				<tr>
					<td>@player.Firstname</td>
					<td>@player.Lastname</td>
					<td>
						<span>
							@foreach (var country in player.Nationalities)
							{
								@country
							}
						</span>
					</td>
					<td>@player.Gender</td>
					<td>@player.Foot</td>
					<td>@player.BirthInfo.DateOfBirth</td>
					<td>@player.BirthInfo.City.Name, @player.BirthInfo.City.Country</td>
					<td>@player.Bmi.HeightInCentimeters</td>
					<td>@player.Bmi.WeightInKilograms</td>
					<td>@player.Rating</td>
				</tr>
			}
		</tbody>
	</table>
}

@code {
	private Player[] players;

	protected override async Task OnInitializedAsync()
	{
		players = await playerService.GetPlayersAsync();
	}
}
